<div class="main-container">
<h3>Detecciones del proyecto</h3>
<div class="table-container">
  <button (click)="navigateToDetect()">Realizar Nueva Detección</button>
  <table>
    <thead>
      <tr>
        <th>Día</th>
        <th>Número de Detecciones</th>
        <th>Detalles</th>
      </tr>
    </thead>
    <tbody>
      @for (deteccion of detecciones ;track $index){
        <tr>
          <td>{{ deteccion.fechaCreacion }}</td>
          <td>{{ deteccion.cantidad }}</td>
          <td>
            <button (click)="navigateToDetection(deteccion.fechaCreacion)">Detalles</button>
          </td>
        </tr>
      }
    </tbody>
  </table>
</div>

<h3>Restricciones del proyecto</h3>

<div class="restrictions-container">
  <button (click)="showModal()">Crear Nueva Restricción</button>
  <table>
    <thead>
      <tr>
        <th>ID Restricción</th>
        <th>Objeto con Restricción</th>
        <th>Desde</th>
        <th>Hasta</th>
        <th>Checkeada</th>
        <th>Informacion</th>
      </tr>
    </thead>
    <tbody>
      @for (restriccion of restricciones ;track $index){
        <tr>
          <td>{{ restriccion.idRestriccion }}</td>
          <td>{{ restriccion.objeto }}</td>
          <td>{{ restriccion.fechaDesde }}</td>
          <td>{{ restriccion.fechaHasta }}</td>
          @if(restriccion.cumplida!=null){
            
            @if(!restriccion.cumplida){
              <td><svg
                fill="#eb4034"
                width="20px"
                height="20px"
                viewBox="0 0 32 32"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
              >
                <title>cross-checkbox</title>
                <path d="M0 26.016q0 2.496 1.76 4.224t4.256 1.76h20q2.464 0 4.224-1.76t1.76-4.224v-20q0-2.496-1.76-4.256t-4.224-1.76h-20q-2.496 0-4.256 1.76t-1.76 4.256v20zM4 26.016v-20q0-0.832 0.576-1.408t1.44-0.608h20q0.8 0 1.408 0.608t0.576 1.408v20q0 0.832-0.576 1.408t-1.408 0.576h-20q-0.832 0-1.44-0.576t-0.576-1.408zM9.76 20.256q0 0.832 0.576 1.408t1.44 0.608 1.408-0.608l2.816-2.816 2.816 2.816q0.576 0.608 1.408 0.608t1.44-0.608 0.576-1.408-0.576-1.408l-2.848-2.848 2.848-2.816q0.576-0.576 0.576-1.408t-0.576-1.408-1.44-0.608-1.408 0.608l-2.816 2.816-2.816-2.816q-0.576-0.608-1.408-0.608t-1.44 0.608-0.576 1.408 0.576 1.408l2.848 2.816-2.848 2.848q-0.576 0.576-0.576 1.408z"></path>
              </svg></td>
              <td><button (click)="navigateToFallo(restriccion.idRestriccion)">Info</button></td>
            }@else{
              <td><svg
                fill="#5fb300"
                width="20px"
                height="20px"
                viewBox="0 0 32 32"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
              >
                <title>tick-checkbox</title>
                <path d="M0 26.016v-20q0-2.496 1.76-4.256t4.256-1.76h20q2.464 0 4.224 1.76t1.76 4.256v20q0 2.496-1.76 4.224t-4.224 1.76h-20q-2.496 0-4.256-1.76t-1.76-4.224zM4 26.016q0 0.832 0.576 1.408t1.44 0.576h20q0.8 0 1.408-0.576t0.576-1.408v-20q0-0.832-0.576-1.408t-1.408-0.608h-20q-0.832 0-1.44 0.608t-0.576 1.408v20zM7.584 16q0-0.832 0.608-1.408t1.408-0.576 1.408 0.576l2.848 2.816 7.072-7.040q0.576-0.608 1.408-0.608t1.408 0.608 0.608 1.408-0.608 1.408l-8.48 8.48q-0.576 0.608-1.408 0.608t-1.408-0.608l-4.256-4.256q-0.608-0.576-0.608-1.408z"></path>
              </svg></td>
            }
          }
          
        </tr>
      }
    </tbody>
  </table>
</div>
<div id="createRestriccionModal" class="modal">
  <div class="modal-content">
    <span class="close" (click)="closeModal()">&times;</span>
    <h2>Crear nueva restricción</h2>
    <form [formGroup]="fb">
      <label for="objeto">Objeto con restricción:</label>
      <input type="text" formControlName="objeto" id="objeto" placeholder="Introduce el objeto" required />
      
      <label for="fechaDesde">Desde:</label>
      <input type="date" formControlName="fechaDesde" id="fechaDesde" required />
      
      <label for="fechaHasta">Hasta:</label>
      <input type="date" formControlName="fechaHasta" id="fechaHasta" required />
      
      <label for="cantidadMin">Cantidad minima:</label>
      <input type="number" formControlName="cantidadMin" id="cantidadMin" placeholder="Introduce la cantidad minima" required />
      <label for="cantidadMax">Cantidad maxima:</label>
      <input type="number" formControlName="cantidadMax" id="cantidadMax" placeholder="Introduce la cantidad max" required />
      
      <button type="submit" (click)="createRestriccion()">Crear</button>
    </form>
  </div>
</div>
</div>