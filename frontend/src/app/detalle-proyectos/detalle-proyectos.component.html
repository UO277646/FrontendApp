<div class="main-container">
  <div class="container mt-4">
    <h3 class="mb-3">Detecciones del proyecto</h3>
  
    <div class="mb-3">
      <button class="btn btn-primary" (click)="navigateToDetect()">Realizar Nueva Detección</button>
    </div>
  
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead class="table-primary">
          <tr>
            <th>Día</th>
            <th>Número de Detecciones</th>
            <th>Detalles</th>
          </tr>
        </thead>
        <tbody>
          @for (deteccion of detecciones; track deteccion.fechaCreacion) {
            <tr>
              <td>{{ deteccion.fechaCreacion }}</td>
              <td>{{ deteccion.cantidad }}</td>
              <td>
                <button class="btn btn-sm btn-info" (click)="navigateToDetection(deteccion.fechaCreacion)">Detalles</button>
              </td>
            </tr>
          } @empty {
            <tr>
              <td colspan="3" class="text-center">No hay detecciones disponibles.</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>


  <div class="container mt-4">
    <h3 class="mb-3">Restricciones del proyecto</h3>
  
    <div class="mb-3">
      <button class="btn btn-primary" (click)="showModal()">Crear Nueva Restricción</button>
    </div>
  
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead class="table-primary">
          <tr>
            <th>ID Restricción</th>
            <th>Objeto con Restricción</th>
            <th>Desde</th>
            <th>Hasta</th>
            <th>Checkeada</th>
            <th>Información</th>
          </tr>
        </thead>
        <tbody>
          @for (restriccion of restricciones; track restriccion.idRestriccion) {
            <tr>
              <td>{{ restriccion.idRestriccion }}</td>
              <td>{{ restriccion.objeto }}</td>
              <td>{{ restriccion.fechaDesde }}</td>
              <td>{{ restriccion.fechaHasta }}</td>
              
                @if (restriccion.cumplida !== null) {
                  @if (!restriccion.cumplida) {
                    <td>
                    <svg class="text-danger" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                    </svg>
                    </td>
                    <td>
                      <button class="btn btn-sm btn-info" (click)="navigateToFallo(restriccion.idRestriccion)">Info</button>
                    </td>
                  } @else {
                    <td>
                    <svg class="text-success" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                    </svg>
                  </td>
                  <td>Sin fallos</td>
                  }
                }
            </tr>
          } @empty {
            <tr>
              <td colspan="6" class="text-center">No hay restricciones disponibles.</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>
<div id="createRestriccionModal" class="modal">
  <div class="modal-content">
    <span class="close" (click)="closeModal()">&times;</span>
    <h2>Crear nueva restricción</h2>
    <form [formGroup]="fb">
      <label for="objeto">Objeto con restricción:</label>
      <input type="text" formControlName="objeto" id="objeto" placeholder="Introduce el objeto" required />
      
      <label for="fechaDesde">Desde:</label>
      <input type="date" formControlName="fechaDesde" id="fechaDesde" required />
      
      <label for="fechaHasta">Hasta:</label>
      <input type="date" formControlName="fechaHasta" id="fechaHasta" required />
      
      <label for="cantidadMin">Cantidad minima:</label>
      <input type="number" formControlName="cantidadMin" id="cantidadMin" placeholder="Introduce la cantidad minima" required min="0"  />
      <label for="cantidadMax">Cantidad maxima:</label>
      <input type="number" formControlName="cantidadMax" id="cantidadMax" placeholder="Introduce la cantidad max" required min="0"/>
      
      <button type="submit" (click)="createRestriccion()">Crear</button>
    </form>
  </div>
</div>
